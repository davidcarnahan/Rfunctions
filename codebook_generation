Future function here for general codebook generation
